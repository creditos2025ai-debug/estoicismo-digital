<!DOCTYPE html>
<html class="light" lang="es">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Estoicismo Digital - Agenda Diaria</title>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"/>
<script src="https://cdn.tailwindcss.com?plugins=forms,typography"></script>
<link href="https://fonts.googleapis.com/css2?family=Newsreader:ital,opsz,wght@0,6..72,200..800;1,6..72,200..800&amp;family=Inter:wght@400;500;700&amp;display=swap" rel="stylesheet"/>
<script>
    tailwind.config = {
      darkMode: "class",
      theme: {
        extend: {
          colors: {
            primary: "#6B7A6A",
            "background-light": "#F8F8F4",
            "background-dark": "#1A1A18",
            "surface-light": "#FFFFFF",
            "surface-dark": "#2C2C2A",
            "text-light-primary": "#333333",
            "text-dark-primary": "#E0E0DC",
            "text-light-secondary": "#6B7A6A",
            "text-dark-secondary": "#A3B8A2",
            "border-light": "#EAEAE0",
            "border-dark": "#3D3D3A",
          },
          fontFamily: {
            display: ["Newsreader", "serif"],
            sans: ["Inter", "sans-serif"],
          },
          borderRadius: {
            DEFAULT: "0.75rem",
          },
        },
      },
    };
  </script>
<style>
    body {
      min-height: max(884px, 100dvh);
    }
  </style>
</head>
<body class="bg-background-light dark:bg-background-dark font-sans">
<div class="container mx-auto max-w-md p-4 pb-24">
<header class="flex justify-between items-center mb-6 pt-4">
<h1 class="text-4xl font-bold text-text-light-primary dark:text-text-dark-primary font-display">Agenda Diaria</h1>
<button onclick="toggleDarkMode()" class="text-text-light-secondary dark:text-text-dark-secondary p-2 hover:bg-surface-light dark:hover:bg-surface-dark rounded-full transition-colors">
<span class="material-icons" id="theme-icon">dark_mode</span>
</button>
</header>

<!-- Selector de Fecha -->
<section class="mb-6 bg-surface-light dark:bg-surface-dark p-5 rounded-2xl border border-border-light dark:border-border-dark">
<div class="flex items-center justify-between mb-4">
<button onclick="changeDay(-1)" class="p-2 hover:bg-background-light dark:hover:bg-background-dark rounded-lg transition-colors">
<span class="material-icons text-text-light-secondary dark:text-text-dark-secondary">chevron_left</span>
</button>
<div class="flex flex-col items-center">
<p class="text-sm text-text-light-secondary dark:text-text-dark-secondary mb-1">Fecha seleccionada</p>
<input type="date" id="date-selector" class="text-lg font-bold text-text-light-primary dark:text-text-dark-primary bg-transparent border-none text-center cursor-pointer font-display" onchange="loadAgenda()">
</div>
<button onclick="changeDay(1)" class="p-2 hover:bg-background-light dark:hover:bg-background-dark rounded-lg transition-colors">
<span class="material-icons text-text-light-secondary dark:text-text-dark-secondary">chevron_right</span>
</button>
</div>
<div class="flex justify-center gap-2">
<button onclick="setToday()" class="px-4 py-2 bg-primary/10 dark:bg-primary/20 text-primary rounded-lg text-sm font-medium hover:bg-primary/20 dark:hover:bg-primary/30 transition-colors">
Hoy
</button>
<button onclick="clearDay()" class="px-4 py-2 bg-red-500/10 dark:bg-red-500/20 text-red-600 dark:text-red-400 rounded-lg text-sm font-medium hover:bg-red-500/20 dark:hover:bg-red-500/30 transition-colors">
Limpiar día
</button>
</div>
</section>

<!-- Franjas Horarias -->
<section class="space-y-4 mb-8">
<!-- Mañana 9:00 - 12:00 -->
<div class="bg-gradient-to-br from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 p-5 rounded-2xl border border-amber-200 dark:border-amber-800">
<div class="flex items-center justify-between mb-3">
<div class="flex items-center gap-2">
<span class="material-icons text-amber-600 dark:text-amber-400">wb_sunny</span>
<h2 class="text-lg font-bold text-text-light-primary dark:text-text-dark-primary font-display">Mañana</h2>
<span class="text-sm text-text-light-secondary dark:text-text-dark-secondary">(9:00 - 12:00)</span>
</div>
<button onclick="addTask('morning')" class="p-1 hover:bg-amber-100 dark:hover:bg-amber-900/50 rounded-lg transition-colors">
<span class="material-icons text-amber-600 dark:text-amber-400 text-xl">add_circle</span>
</button>
</div>
<div id="morning-tasks" class="space-y-2">
<!-- Tasks will be loaded here -->
</div>
</div>

<!-- Mediodía 12:00 - 15:00 -->
<div class="bg-gradient-to-br from-yellow-50 to-amber-50 dark:from-yellow-900/20 dark:to-amber-900/20 p-5 rounded-2xl border border-yellow-200 dark:border-yellow-800">
<div class="flex items-center justify-between mb-3">
<div class="flex items-center gap-2">
<span class="material-icons text-yellow-600 dark:text-yellow-400">light_mode</span>
<h2 class="text-lg font-bold text-text-light-primary dark:text-text-dark-primary font-display">Mediodía</h2>
<span class="text-sm text-text-light-secondary dark:text-text-dark-secondary">(12:00 - 15:00)</span>
</div>
<button onclick="addTask('noon')" class="p-1 hover:bg-yellow-100 dark:hover:bg-yellow-900/50 rounded-lg transition-colors">
<span class="material-icons text-yellow-600 dark:text-yellow-400 text-xl">add_circle</span>
</button>
</div>
<div id="noon-tasks" class="space-y-2">
<!-- Tasks will be loaded here -->
</div>
</div>

<!-- Tarde 15:00 - 21:00 -->
<div class="bg-gradient-to-br from-orange-50 to-red-50 dark:from-orange-900/20 dark:to-red-900/20 p-5 rounded-2xl border border-orange-200 dark:border-orange-800">
<div class="flex items-center justify-between mb-3">
<div class="flex items-center gap-2">
<span class="material-icons text-orange-600 dark:text-orange-400">wb_twilight</span>
<h2 class="text-lg font-bold text-text-light-primary dark:text-text-dark-primary font-display">Tarde</h2>
<span class="text-sm text-text-light-secondary dark:text-text-dark-secondary">(15:00 - 21:00)</span>
</div>
<button onclick="addTask('afternoon')" class="p-1 hover:bg-orange-100 dark:hover:bg-orange-900/50 rounded-lg transition-colors">
<span class="material-icons text-orange-600 dark:text-orange-400 text-xl">add_circle</span>
</button>
</div>
<div id="afternoon-tasks" class="space-y-2">
<!-- Tasks will be loaded here -->
</div>
</div>

<!-- Noche 21:00 - 00:00 -->
<div class="bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 p-5 rounded-2xl border border-blue-200 dark:border-blue-800">
<div class="flex items-center justify-between mb-3">
<div class="flex items-center gap-2">
<span class="material-icons text-blue-600 dark:text-blue-400">nightlight</span>
<h2 class="text-lg font-bold text-text-light-primary dark:text-text-dark-primary font-display">Noche</h2>
<span class="text-sm text-text-light-secondary dark:text-text-dark-secondary">(21:00 - 00:00)</span>
</div>
<button onclick="addTask('night')" class="p-1 hover:bg-blue-100 dark:hover:bg-blue-900/50 rounded-lg transition-colors">
<span class="material-icons text-blue-600 dark:text-blue-400 text-xl">add_circle</span>
</button>
</div>
<div id="night-tasks" class="space-y-2">
<!-- Tasks will be loaded here -->
</div>
</div>

<!-- Madrugada 00:00 - 02:00 -->
<div class="bg-gradient-to-br from-indigo-50 to-purple-50 dark:from-indigo-900/20 dark:to-purple-900/20 p-5 rounded-2xl border border-indigo-200 dark:border-indigo-800">
<div class="flex items-center justify-between mb-3">
<div class="flex items-center gap-2">
<span class="material-icons text-indigo-600 dark:text-indigo-400">dark_mode</span>
<h2 class="text-lg font-bold text-text-light-primary dark:text-text-dark-primary font-display">Madrugada</h2>
<span class="text-sm text-text-light-secondary dark:text-text-dark-secondary">(00:00 - 02:00)</span>
</div>
<button onclick="addTask('latenight')" class="p-1 hover:bg-indigo-100 dark:hover:bg-indigo-900/50 rounded-lg transition-colors">
<span class="material-icons text-indigo-600 dark:text-indigo-400 text-xl">add_circle</span>
</button>
</div>
<div id="latenight-tasks" class="space-y-2">
<!-- Tasks will be loaded here -->
</div>
</div>

<!-- Descanso 02:00 - 09:00 -->
<div class="bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 p-5 rounded-2xl border border-purple-200 dark:border-purple-800">
<div class="flex items-center justify-between mb-3">
<div class="flex items-center gap-2">
<span class="material-icons text-purple-600 dark:text-purple-400">hotel</span>
<h2 class="text-lg font-bold text-text-light-primary dark:text-text-dark-primary font-display">Descanso</h2>
<span class="text-sm text-text-light-secondary dark:text-text-dark-secondary">(02:00 - 09:00)</span>
</div>
<button onclick="addTask('rest')" class="p-1 hover:bg-purple-100 dark:hover:bg-purple-900/50 rounded-lg transition-colors">
<span class="material-icons text-purple-600 dark:text-purple-400 text-xl">add_circle</span>
</button>
</div>
<div id="rest-tasks" class="space-y-2">
<!-- Tasks will be loaded here -->
</div>
</div>
</section>

</div>

<!-- Bottom Navigation -->
<footer class="fixed bottom-0 left-0 right-0 bg-background-light dark:bg-background-dark border-t border-border-light dark:border-border-dark">
<nav class="container mx-auto max-w-md flex justify-around items-center h-20">
<a class="flex flex-col items-center text-text-light-secondary dark:text-text-dark-secondary" href="index.html">
<span class="material-icons">home</span>
<span class="text-xs">Inicio</span>
</a>
<a class="flex flex-col items-center text-text-light-secondary dark:text-text-dark-secondary" href="learn.html">
<span class="material-icons">book</span>
<span class="text-xs">Aprender</span>
</a>
<a class="flex flex-col items-center text-text-light-secondary dark:text-text-dark-secondary" href="practice.html">
<span class="material-icons">psychology</span>
<span class="text-xs">Practicar</span>
</a>
<a class="flex flex-col items-center text-primary" href="agenda.html">
<span class="material-icons">event_note</span>
<span class="text-xs font-bold">Agenda</span>
</a>
<a class="flex flex-col items-center text-text-light-secondary dark:text-text-dark-secondary" href="journal.html">
<span class="material-icons">edit_note</span>
<span class="text-xs">Diario</span>
</a>
<a class="flex flex-col items-center text-text-light-secondary dark:text-text-dark-secondary" href="progress.html">
<span class="material-icons">trending_up</span>
<span class="text-xs">Progreso</span>
</a>
</nav>
</footer>

<script src="js/app.js"></script>
<script>
// Agenda Management
let currentDate = new Date();

document.addEventListener('DOMContentLoaded', () => {
  setToday();
});

function setToday() {
  currentDate = new Date();
  updateDateSelector();
  loadAgenda();
}

function changeDay(days) {
  currentDate.setDate(currentDate.getDate() + days);
  updateDateSelector();
  loadAgenda();
}

function updateDateSelector() {
  const dateInput = document.getElementById('date-selector');
  dateInput.value = currentDate.toISOString().split('T')[0];
}

function loadAgenda() {
  const dateInput = document.getElementById('date-selector');
  currentDate = new Date(dateInput.value + 'T12:00:00');
  
  const dateKey = dateInput.value;
  const agendas = JSON.parse(localStorage.getItem('dailyAgendas') || '{}');
  const dayAgenda = agendas[dateKey] || {
    morning: [],
    noon: [],
    afternoon: [],
    night: [],
    latenight: [],
    rest: []
  };
  
  // Load tasks for each period
  ['morning', 'noon', 'afternoon', 'night', 'latenight', 'rest'].forEach(period => {
    renderTasks(period, dayAgenda[period] || []);
  });
}

function renderTasks(period, tasks) {
  const container = document.getElementById(`${period}-tasks`);
  
  if (tasks.length === 0) {
    container.innerHTML = `
      <p class="text-sm text-text-light-secondary dark:text-text-dark-secondary text-center py-2">
        Sin tareas. Haz clic en + para añadir.
      </p>
    `;
    return;
  }
  
  container.innerHTML = tasks.map((task, index) => `
    <div class="bg-white dark:bg-surface-dark p-3 rounded-lg border border-border-light dark:border-border-dark flex items-center gap-3 group">
      <input type="checkbox" 
             ${task.completed ? 'checked' : ''} 
             onchange="toggleTask('${period}', ${index})"
             class="w-5 h-5 rounded text-primary focus:ring-primary">
      <div class="flex-1">
        <div class="flex items-center gap-2">
          <input type="time" 
                 value="${task.time}" 
                 onchange="updateTaskTime('${period}', ${index}, this.value)"
                 class="text-sm font-medium text-text-light-secondary dark:text-text-dark-secondary bg-transparent border-none p-0 w-16">
          <input type="text" 
                 value="${task.task}" 
                 onchange="updateTaskText('${period}', ${index}, this.value)"
                 placeholder="Escribe tu tarea..."
                 class="flex-1 text-sm text-text-light-primary dark:text-text-dark-primary bg-transparent border-none p-0 ${task.completed ? 'line-through opacity-60' : ''}">
        </div>
      </div>
      <button onclick="deleteTask('${period}', ${index})" class="opacity-0 group-hover:opacity-100 transition-opacity p-1 hover:bg-red-50 dark:hover:bg-red-900/20 rounded">
        <span class="material-icons text-red-500 text-lg">delete</span>
      </button>
    </div>
  `).join('');
}

function addTask(period) {
  const dateKey = document.getElementById('date-selector').value;
  const agendas = JSON.parse(localStorage.getItem('dailyAgendas') || '{}');
  
  if (!agendas[dateKey]) {
    agendas[dateKey] = {
      morning: [],
      noon: [],
      afternoon: [],
      night: [],
      latenight: [],
      rest: []
    };
  }
  
  // Default times for each period
  const defaultTimes = {
    morning: '09:00',
    noon: '12:00',
    afternoon: '15:00',
    night: '21:00',
    latenight: '00:00',
    rest: '02:00'
  };
  
  const newTask = {
    time: defaultTimes[period],
    task: '',
    completed: false,
    id: Date.now()
  };
  
  agendas[dateKey][period].push(newTask);
  localStorage.setItem('dailyAgendas', JSON.stringify(agendas));
  
  renderTasks(period, agendas[dateKey][period]);
}

function deleteTask(period, index) {
  const dateKey = document.getElementById('date-selector').value;
  const agendas = JSON.parse(localStorage.getItem('dailyAgendas') || '{}');
  
  if (agendas[dateKey] && agendas[dateKey][period]) {
    agendas[dateKey][period].splice(index, 1);
    localStorage.setItem('dailyAgendas', JSON.stringify(agendas));
    renderTasks(period, agendas[dateKey][period]);
  }
}

function toggleTask(period, index) {
  const dateKey = document.getElementById('date-selector').value;
  const agendas = JSON.parse(localStorage.getItem('dailyAgendas') || '{}');
  
  if (agendas[dateKey] && agendas[dateKey][period] && agendas[dateKey][period][index]) {
    agendas[dateKey][period][index].completed = !agendas[dateKey][period][index].completed;
    localStorage.setItem('dailyAgendas', JSON.stringify(agendas));
    renderTasks(period, agendas[dateKey][period]);
  }
}

function updateTaskTime(period, index, newTime) {
  const dateKey = document.getElementById('date-selector').value;
  const agendas = JSON.parse(localStorage.getItem('dailyAgendas') || '{}');
  
  if (agendas[dateKey] && agendas[dateKey][period] && agendas[dateKey][period][index]) {
    agendas[dateKey][period][index].time = newTime;
    localStorage.setItem('dailyAgendas', JSON.stringify(agendas));
  }
}

function updateTaskText(period, index, newText) {
  const dateKey = document.getElementById('date-selector').value;
  const agendas = JSON.parse(localStorage.getItem('dailyAgendas') || '{}');
  
  if (agendas[dateKey] && agendas[dateKey][period] && agendas[dateKey][period][index]) {
    agendas[dateKey][period][index].task = newText;
    localStorage.setItem('dailyAgendas', JSON.stringify(agendas));
  }
}

function clearDay() {
  if (!confirm('¿Estás seguro de que quieres borrar todas las tareas de este día?')) {
    return;
  }
  
  const dateKey = document.getElementById('date-selector').value;
  const agendas = JSON.parse(localStorage.getItem('dailyAgendas') || '{}');
  
  delete agendas[dateKey];
  localStorage.setItem('dailyAgendas', JSON.stringify(agendas));
  
  loadAgenda();
}
</script>
</body>
</html>

