<!DOCTYPE html>
<html class="light" lang="es">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Estoicismo Digital - Agenda Diaria</title>
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Newsreader:ital,opsz,wght@0,6..72,200..800;1,6..72,200..800&amp;family=Noto+Sans:wght@400;700&amp;display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet"/>
<script id="tailwind-config">
    tailwind.config = {
      darkMode: "class",
      theme: {
        extend: {
          colors: {
            primary: "#d46911",
            "background-light": "#f8f7f6",
            "background-dark": "#221810",
            "text-light-primary": "#3C3633",
            "text-dark-primary": "#f8f7f6",
            "text-light-secondary": "#897361",
            "text-dark-secondary": "#a5978b",
            "card-light": "#ffffff",
            "card-dark": "#2a1e14",
            "border-light": "#e5e0da",
            "border-dark": "#4a3c30",
          },
          fontFamily: {
            display: ["Newsreader", "serif"],
            sans: ["Noto Sans", "sans-serif"],
          },
          borderRadius: {
            DEFAULT: "0.25rem",
            lg: "0.5rem",
            xl: "0.75rem",
            full: "9999px"
          },
        },
      },
    };
  </script>
<style>
    body {
      min-height: max(884px, 100dvh);
    }
  </style>
</head>
<body class="bg-background-light dark:bg-background-dark font-sans">
<div class="relative flex h-auto min-h-screen w-full flex-col bg-background-light dark:bg-background-dark group/design-root overflow-x-hidden" style='font-family: "Noto Sans", sans-serif;'>
<!-- Top App Bar -->
<div class="flex items-center bg-background-light dark:bg-background-dark p-4 pb-2 justify-between sticky top-0 z-10 border-b border-border-light dark:border-border-dark">
<div class="text-text-light-primary dark:text-text-dark-primary flex size-12 shrink-0 items-center justify-start">
<a href="index.html"><span class="material-symbols-outlined">arrow_back</span></a>
</div>
<h2 class="text-text-light-primary dark:text-text-dark-primary text-lg font-bold leading-tight tracking-[-0.015em] font-display flex-1 text-center">Agenda Diaria</h2>
<div class="flex w-12 items-center justify-end">
<button onclick="toggleDarkMode()" class="flex max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-12 bg-transparent text-text-light-primary dark:text-text-dark-primary gap-2 text-base font-bold leading-normal tracking-[0.015em] min-w-0 p-0">
<div class="text-text-light-primary dark:text-text-dark-primary">
<span class="material-symbols-outlined" id="theme-icon">dark_mode</span>
</div>
</button>
</div>
</div>

<!-- Headline Text (Date) -->
<div class="flex items-center justify-between px-4 pt-5 pb-3">
<button onclick="changeDay(-1)" class="flex items-center justify-center h-10 w-10 rounded-full text-text-light-primary dark:text-text-dark-primary bg-transparent hover:bg-card-light dark:hover:bg-card-dark transition-colors">
<span class="material-symbols-outlined">chevron_left</span>
</button>
<h2 class="text-text-light-primary dark:text-text-dark-primary tracking-light text-[28px] font-bold leading-tight text-center font-display" id="date-display">MARTES, 16 DE JULIO</h2>
<button onclick="changeDay(1)" class="flex items-center justify-center h-10 w-10 rounded-full text-text-light-primary dark:text-text-dark-primary bg-transparent hover:bg-card-light dark:hover:bg-card-dark transition-colors">
<span class="material-symbols-outlined">chevron_right</span>
</button>
</div>
<input type="date" id="date-selector" class="hidden" onchange="loadAgenda()">

<div class="px-4 pb-4 flex gap-2 justify-center">
<button onclick="setToday()" class="flex items-center justify-center py-2 px-4 rounded-full text-sm font-semibold transition-colors bg-primary/20 dark:bg-primary/30 text-primary border border-primary/30">
Hoy
</button>
<button onclick="clearDay()" class="flex items-center justify-center py-2 px-4 rounded-full text-sm font-semibold transition-colors bg-transparent text-text-light-secondary dark:text-text-dark-secondary border border-border-light dark:border-border-dark hover:bg-red-500/10">
Limpiar día
</button>
</div>

<!-- Franjas Horarias -->
<div class="space-y-4 px-4 pb-24">
<!-- Mañana 9:00 - 12:00 -->
<div>
<div class="flex items-center justify-between pb-3">
<div class="flex items-center gap-2">
<span class="material-symbols-outlined text-amber-600 dark:text-amber-500">wb_sunny</span>
<h2 class="text-text-light-primary dark:text-text-dark-primary text-[22px] font-bold leading-tight tracking-[-0.015em] font-display">Mañana</h2>
<span class="text-sm text-text-light-secondary dark:text-text-dark-secondary font-sans">(9:00 - 12:00)</span>
</div>
<button onclick="addTask('morning')" class="flex items-center justify-center h-8 w-8 bg-primary text-white rounded-full shadow-sm hover:bg-primary/90 transition-colors">
<span class="material-symbols-outlined text-xl">add</span>
</button>
</div>
<div id="morning-tasks" class="space-y-3">
<!-- Tasks will be loaded here -->
</div>
</div>

<!-- Mediodía 12:00 - 15:00 -->
<div>
<div class="flex items-center justify-between pb-3">
<div class="flex items-center gap-2">
<span class="material-symbols-outlined text-yellow-600 dark:text-yellow-500">light_mode</span>
<h2 class="text-text-light-primary dark:text-text-dark-primary text-[22px] font-bold leading-tight tracking-[-0.015em] font-display">Mediodía</h2>
<span class="text-sm text-text-light-secondary dark:text-text-dark-secondary font-sans">(12:00 - 15:00)</span>
</div>
<button onclick="addTask('noon')" class="flex items-center justify-center h-8 w-8 bg-primary text-white rounded-full shadow-sm hover:bg-primary/90 transition-colors">
<span class="material-symbols-outlined text-xl">add</span>
</button>
</div>
<div id="noon-tasks" class="space-y-3">
<!-- Tasks will be loaded here -->
</div>
</div>

<!-- Tarde 15:00 - 21:00 -->
<div>
<div class="flex items-center justify-between pb-3 pt-3">
<div class="flex items-center gap-2">
<span class="material-symbols-outlined text-orange-600 dark:text-orange-500">wb_twilight</span>
<h2 class="text-text-light-primary dark:text-text-dark-primary text-[22px] font-bold leading-tight tracking-[-0.015em] font-display">Tarde</h2>
<span class="text-sm text-text-light-secondary dark:text-text-dark-secondary font-sans">(15:00 - 21:00)</span>
</div>
<button onclick="addTask('afternoon')" class="flex items-center justify-center h-8 w-8 bg-primary text-white rounded-full shadow-sm hover:bg-primary/90 transition-colors">
<span class="material-symbols-outlined text-xl">add</span>
</button>
</div>
<div id="afternoon-tasks" class="space-y-3">
<!-- Tasks will be loaded here -->
</div>
</div>

<!-- Noche 21:00 - 00:00 -->
<div>
<div class="flex items-center justify-between pb-3 pt-3">
<div class="flex items-center gap-2">
<span class="material-symbols-outlined text-blue-600 dark:text-blue-500">nightlight</span>
<h2 class="text-text-light-primary dark:text-text-dark-primary text-[22px] font-bold leading-tight tracking-[-0.015em] font-display">Noche</h2>
<span class="text-sm text-text-light-secondary dark:text-text-dark-secondary font-sans">(21:00 - 00:00)</span>
</div>
<button onclick="addTask('night')" class="flex items-center justify-center h-8 w-8 bg-primary text-white rounded-full shadow-sm hover:bg-primary/90 transition-colors">
<span class="material-symbols-outlined text-xl">add</span>
</button>
</div>
<div id="night-tasks" class="space-y-3">
<!-- Tasks will be loaded here -->
</div>
</div>

<!-- Madrugada 00:00 - 02:00 -->
<div>
<div class="flex items-center justify-between pb-3 pt-3">
<div class="flex items-center gap-2">
<span class="material-symbols-outlined text-indigo-600 dark:text-indigo-500">bedtime</span>
<h2 class="text-text-light-primary dark:text-text-dark-primary text-[22px] font-bold leading-tight tracking-[-0.015em] font-display">Madrugada</h2>
<span class="text-sm text-text-light-secondary dark:text-text-dark-secondary font-sans">(00:00 - 02:00)</span>
</div>
<button onclick="addTask('latenight')" class="flex items-center justify-center h-8 w-8 bg-primary text-white rounded-full shadow-sm hover:bg-primary/90 transition-colors">
<span class="material-symbols-outlined text-xl">add</span>
</button>
</div>
<div id="latenight-tasks" class="space-y-3">
<!-- Tasks will be loaded here -->
</div>
</div>

<!-- Descanso 02:00 - 09:00 -->
<div>
<div class="flex items-center justify-between pb-3 pt-3">
<div class="flex items-center gap-2">
<span class="material-symbols-outlined text-purple-600 dark:text-purple-500">hotel</span>
<h2 class="text-text-light-primary dark:text-text-dark-primary text-[22px] font-bold leading-tight tracking-[-0.015em] font-display">Descanso</h2>
<span class="text-sm text-text-light-secondary dark:text-text-dark-secondary font-sans">(02:00 - 09:00)</span>
</div>
<button onclick="addTask('rest')" class="flex items-center justify-center h-8 w-8 bg-primary text-white rounded-full shadow-sm hover:bg-primary/90 transition-colors">
<span class="material-symbols-outlined text-xl">add</span>
</button>
</div>
<div id="rest-tasks" class="space-y-3">
<!-- Tasks will be loaded here -->
</div>
</div>
</div>

</div>

<!-- Bottom Navigation -->
<footer class="fixed bottom-0 left-0 right-0 bg-background-light dark:bg-background-dark border-t border-border-light dark:border-border-dark">
<nav class="container mx-auto max-w-md flex justify-around items-center h-20">
<a class="flex flex-col items-center text-text-light-secondary dark:text-text-dark-secondary" href="index.html">
<span class="material-icons">home</span>
<span class="text-xs">Inicio</span>
</a>
<a class="flex flex-col items-center text-text-light-secondary dark:text-text-dark-secondary" href="learn.html">
<span class="material-icons">book</span>
<span class="text-xs">Aprender</span>
</a>
<a class="flex flex-col items-center text-text-light-secondary dark:text-text-dark-secondary" href="practice.html">
<span class="material-icons">psychology</span>
<span class="text-xs">Practicar</span>
</a>
<a class="flex flex-col items-center text-primary" href="agenda.html">
<span class="material-icons">event_note</span>
<span class="text-xs font-bold">Agenda</span>
</a>
<a class="flex flex-col items-center text-text-light-secondary dark:text-text-dark-secondary" href="journal.html">
<span class="material-icons">edit_note</span>
<span class="text-xs">Diario</span>
</a>
<a class="flex flex-col items-center text-text-light-secondary dark:text-text-dark-secondary" href="progress.html">
<span class="material-icons">trending_up</span>
<span class="text-xs">Progreso</span>
</a>
</nav>
</footer>

<script src="js/app.js"></script>
<script>
// Agenda Management
let currentDate = new Date();

document.addEventListener('DOMContentLoaded', () => {
  setToday();
});

function setToday() {
  currentDate = new Date();
  updateDateSelector();
  loadAgenda();
}

function changeDay(days) {
  currentDate.setDate(currentDate.getDate() + days);
  updateDateSelector();
  loadAgenda();
}

function updateDateSelector() {
  const dateInput = document.getElementById('date-selector');
  dateInput.value = currentDate.toISOString().split('T')[0];
  
  // Update display date
  const dateDisplay = document.getElementById('date-display');
  const days = ['DOMINGO', 'LUNES', 'MARTES', 'MIÉRCOLES', 'JUEVES', 'VIERNES', 'SÁBADO'];
  const months = ['ENERO', 'FEBRERO', 'MARZO', 'ABRIL', 'MAYO', 'JUNIO', 'JULIO', 'AGOSTO', 'SEPTIEMBRE', 'OCTUBRE', 'NOVIEMBRE', 'DICIEMBRE'];
  
  const dayName = days[currentDate.getDay()];
  const dayNum = currentDate.getDate();
  const monthName = months[currentDate.getMonth()];
  
  dateDisplay.textContent = `${dayName}, ${dayNum} DE ${monthName}`;
}

function loadAgenda() {
  const dateInput = document.getElementById('date-selector');
  currentDate = new Date(dateInput.value + 'T12:00:00');
  
  // Update display date
  updateDateSelector();
  
  const dateKey = dateInput.value;
  const agendas = JSON.parse(localStorage.getItem('dailyAgendas') || '{}');
  const dayAgenda = agendas[dateKey] || {
    morning: [],
    noon: [],
    afternoon: [],
    night: [],
    latenight: [],
    rest: []
  };
  
  // Load tasks for each period
  ['morning', 'noon', 'afternoon', 'night', 'latenight', 'rest'].forEach(period => {
    renderTasks(period, dayAgenda[period] || []);
  });
}

function renderTasks(period, tasks) {
  const container = document.getElementById(`${period}-tasks`);
  
  if (tasks.length === 0) {
    container.innerHTML = `
      <p class="text-sm text-text-light-secondary dark:text-text-dark-secondary text-center py-2 font-sans">
        Sin tareas. Haz clic en + para añadir.
      </p>
    `;
    return;
  }
  
  container.innerHTML = tasks.map((task, index) => `
    <div class="flex items-center justify-between p-4 rounded-xl bg-card-light dark:bg-card-dark border border-border-light dark:border-border-dark shadow-sm group">
      <div class="flex items-center gap-4 flex-1">
        <div class="text-text-light-primary dark:text-text-dark-primary">
          <input type="checkbox" 
                 ${task.completed ? 'checked' : ''} 
                 onchange="toggleTask('${period}', ${index})"
                 class="w-5 h-5 rounded text-primary focus:ring-primary cursor-pointer">
        </div>
        <div class="flex-1">
          <div class="flex items-center gap-2">
            <input type="time" 
                   value="${task.time}" 
                   onchange="updateTaskTime('${period}', ${index}, this.value)"
                   class="text-sm font-medium text-text-light-secondary dark:text-text-dark-secondary bg-transparent border-none p-0 w-16 cursor-pointer font-sans">
            <input type="text" 
                   value="${task.task}" 
                   onchange="updateTaskText('${period}', ${index}, this.value)"
                   placeholder="Escribe tu tarea..."
                   class="flex-1 text-base font-bold text-text-light-primary dark:text-text-dark-primary bg-transparent border-none p-0 font-sans ${task.completed ? 'line-through opacity-60' : ''}">
          </div>
        </div>
      </div>
      <button onclick="deleteTask('${period}', ${index})" class="flex items-center justify-center h-10 w-10 rounded-full text-red-500 bg-transparent hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors opacity-0 group-hover:opacity-100">
        <span class="material-symbols-outlined">delete</span>
      </button>
    </div>
  `).join('');
}

function addTask(period) {
  const dateKey = document.getElementById('date-selector').value;
  const agendas = JSON.parse(localStorage.getItem('dailyAgendas') || '{}');
  
  if (!agendas[dateKey]) {
    agendas[dateKey] = {
      morning: [],
      noon: [],
      afternoon: [],
      night: [],
      latenight: [],
      rest: []
    };
  }
  
  // Default times for each period
  const defaultTimes = {
    morning: '09:00',
    noon: '12:00',
    afternoon: '15:00',
    night: '21:00',
    latenight: '00:00',
    rest: '02:00'
  };
  
  const newTask = {
    time: defaultTimes[period],
    task: '',
    completed: false,
    id: Date.now()
  };
  
  agendas[dateKey][period].push(newTask);
  localStorage.setItem('dailyAgendas', JSON.stringify(agendas));
  
  renderTasks(period, agendas[dateKey][period]);
}

function deleteTask(period, index) {
  const dateKey = document.getElementById('date-selector').value;
  const agendas = JSON.parse(localStorage.getItem('dailyAgendas') || '{}');
  
  if (agendas[dateKey] && agendas[dateKey][period]) {
    agendas[dateKey][period].splice(index, 1);
    localStorage.setItem('dailyAgendas', JSON.stringify(agendas));
    renderTasks(period, agendas[dateKey][period]);
  }
}

function toggleTask(period, index) {
  const dateKey = document.getElementById('date-selector').value;
  const agendas = JSON.parse(localStorage.getItem('dailyAgendas') || '{}');
  
  if (agendas[dateKey] && agendas[dateKey][period] && agendas[dateKey][period][index]) {
    agendas[dateKey][period][index].completed = !agendas[dateKey][period][index].completed;
    localStorage.setItem('dailyAgendas', JSON.stringify(agendas));
    renderTasks(period, agendas[dateKey][period]);
  }
}

function updateTaskTime(period, index, newTime) {
  const dateKey = document.getElementById('date-selector').value;
  const agendas = JSON.parse(localStorage.getItem('dailyAgendas') || '{}');
  
  if (agendas[dateKey] && agendas[dateKey][period] && agendas[dateKey][period][index]) {
    agendas[dateKey][period][index].time = newTime;
    localStorage.setItem('dailyAgendas', JSON.stringify(agendas));
  }
}

function updateTaskText(period, index, newText) {
  const dateKey = document.getElementById('date-selector').value;
  const agendas = JSON.parse(localStorage.getItem('dailyAgendas') || '{}');
  
  if (agendas[dateKey] && agendas[dateKey][period] && agendas[dateKey][period][index]) {
    agendas[dateKey][period][index].task = newText;
    localStorage.setItem('dailyAgendas', JSON.stringify(agendas));
  }
}

function clearDay() {
  if (!confirm('¿Estás seguro de que quieres borrar todas las tareas de este día?')) {
    return;
  }
  
  const dateKey = document.getElementById('date-selector').value;
  const agendas = JSON.parse(localStorage.getItem('dailyAgendas') || '{}');
  
  delete agendas[dateKey];
  localStorage.setItem('dailyAgendas', JSON.stringify(agendas));
  
  loadAgenda();
}
</script>
</body>
</html>

